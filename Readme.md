# 美的画像セレクター

このプログラムは、指定されたフォルダ内の画像を自動的に評価し、美的に優れた画像を選別するツールです。

## 機能

1. 指定フォルダ内の画像を自動スキャン
2. 画像の美的評価スコアの計算
3. 設定した閾値以上のスコアを持つ画像の検出
4. 選別された画像の「good」フォルダへの自動コピー
5. 直感的なGradioインターフェースによる操作

## 使用方法

1. フォルダパスを入力: 評価したい画像が含まれるフォルダのパスを入力します。
2. 閾値を設定: スライダーを使用して、「良い」と判断する画像のスコア閾値を設定します（4〜6の範囲）。
3. 「評価開始」ボタンをクリック: 画像の評価プロセスが開始されます。
4. 結果の確認: 現在評価中の画像、そのスコア、ステータスが表示されます。
5. 操作:
   - 「評価停止」: 評価プロセスを中断します。
   - 「前の画像」/「次の画像」: 評価済み画像を閲覧します。
   - 「保存」: 現在表示されている画像を「good」フォルダにコピーします。

## 対応画像形式

- JPG, JPEG, PNG
- RAW形式 (ARW, NEF)
- HEIC

## 注意事項

- RAWファイルが存在する場合、JPEGよりも優先してコピーされます。
- 同名のファイルが「good」フォルダに既に存在する場合、自動的にリネームされます。

## 技術的詳細

- CLIPモデルとカスタム訓練された美的評価モデルを使用
- Gradioを使用したインタラクティブなウェブインターフェース
- マルチプラットフォーム対応（Windows, Unix系OS）

このツールを使用して、大量の画像コレクションから効率的に高品質な画像を選別することができます。

## インストール方法

1. 必要なライブラリをインストールします：

   ```
   pip install numpy pillow requests torch torchvision clip gradio pillow-heif rawpy
   ```

2. CLIPモデルをインストールします：

   ```
   pip install git+https://github.com/openai/CLIP.git
   ```

3. 美的評価モデルをダウンロードします：

   プログラムを初めて実行すると、`sac+logos+ava1-l14-linearMSE.pth`というモデルファイルが自動的にダウンロードされます。

4. `gradio_find_good_photo.py`をダウンロードまたはクローンします。

## 実行方法

1. コマンドラインで以下のコマンドを実行します：

   ```
   python gradio_find_good_photo.py
   ```

2. ブラウザで表示されるローカルURLにアクセスします（通常は`http://127.0.0.1:7860`）。

## システム要件

- Python 3.6以上
- CUDA対応GPUを推奨（高速処理のため）
- 十分なストレージ空間（処理する画像の数と大きさに依存）

## トラブルシューティング

- CUDA関連のエラーが発生した場合、CPUモードで動作します。
- RAW画像の処理に問題がある場合、`rawpy`ライブラリが正しくインストールされているか確認してください。
- HEICファイルの処理に問題がある場合、`pillow-heif`ライブラリが正しくインストールされているか確認してください。

注意：初回実行時にモデルのダウンロードに時間がかかる場合があります。安定したインターネット接続を確保してください。



